<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QTech</title>
    <link rel="icon" type="image/png" href="img/store icon.png">
    <!--File Css-->
    <link rel="stylesheet" href="css/style.css">
    <!--Font Awesom-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

</head>

<body>

    <div id="splash-screen">
        <img src="img/logov2.png" alt="Splash Image">
    </div>


    <header>
        <div class="container top-nav">
            <a href="#" class="logo"><img src="img/logov2.png" alt=""></a>
            <div class="searchContainer">
                <form id="searchForm" action="search_results.html" class="search">
                    <input type="search" id="searchInput" placeholder="Search for product">
                    <button type="submit">Search</button>
                </form>
                <div class="searchDropdown"></div>
            </div>
            <div class="test">
                <div class="cart_header">
                    <div class="icon_language">
                        <i class="fa-solid fa-globe"></i>
                        <span class="language">ENG</span>
                    </div>
                </div>
                <div class="cart_header">
                    <div class="icon_fav" onclick="openFavPage()">
                        <i class="fa-solid fa-heart"></i>
                        <span class="count_fav">0</span>
                    </div>
                </div>
                <div class="cart_header">
                    <div onclick="open_cart()" class="icon_cart">
                        <i class="fa-solid fa-cart-shopping"></i>
                        <span class="count_item">0</span>
                    </div>
                </div>
                <div class="total_price">
                    <p>My Cart:</p>
                    <p class="price_cart_head">$0</p>
                </div>
            </div>
        </div>
        <nav>
            <div class="links container">
                <i onclick="open_menu()" class="fa-solid fa-bars btn_open_menu"></i>
                <ul id="menu">
                    <span onclick="close_menu()" class="bg_overlay"></span>
                    <i onclick="close_menu()" class="fa-regular fa-circle-xmark btn_close_menu"></i>
                    <img class="logo_menu" src="img/logo-black.png" alt="">
                    <li class="active"><a href="index.html">home</a></li>
                    <li><a href="all_product.html">all product</a></li>
                    <li><a href="">about us</a></li>
                    <li><a href="">contact</a></li>
                </ul>
                <div class="loging_signup">
                    <a href="login.html">login <i class="fa-solid fa-right-to-bracket"></i></a>
                    <a href="#">sign up <i class="fa-solid fa-user-plus"></i></a>
                </div>
            </div>
        </nav>
    </header>

    <div class="cart">
        <div class="top_cart">
            <h3>My Cart <span class="top_items_count">(0 Item in Cart)</span></h3>
            <span onclick="close_cart()" class="close_cart"><i class="fa-regular fa-circle-xmark"></i></span>
        </div>

        <div class="items_in_cart">

        </div>

        <div class="bottom_cart">
            <div class="total">
                <p>Cart Subtotal</p>
                <p class="price_cart_total">$0</p>
            </div>
            <div class="button_cart">
                <a href="checkout.html" class="btn_cart">Proceed to checkout</a>
                <button class="btn_cart trans-bg">Shop More</button>
            </div>
        </div>
    </div>


    <div class="top_page">
        <div class="container">
            <h1>Experience the future of Technology with Our Topico.</h1>
            <p>Find everything you need to transform you home into a smart, connected space.
                our Topico store offers a wide range of devices of fit you't needs
            </p>
        </div>
    </div>


    <section class="all_products">
        <div class="container">

            <span onclick="open_close_filter()" class="btn_filter">
                Filter <i class="fa-solid fa-filter"></i>
            </span>



            <div id="products_search" class="products_search">

            </div>
        </div>

        <div class="pagination">
            <span class="btn_page prev"><i class="fa-solid fa-backward-step"></i></span>
            <a href=""><span class="num_page active">1</span></a>
            <a href=""><span class="num_page">2</span></a>
            <a href=""><span class="num_page">3</span></a>
            <span class="btn_page next"><i class="fa-solid fa-forward-step"></i></span>

        </div>

    </section>

    <p id="test">


    </p>

    <script>

    </script>


    <div class="back_to_top">
        <p>Back to Top</p>
    </div>

    <footer>
        <div class="container">
            <div class="big_row">
                <img src="img/logo-white.png" alt="">
                <div class="hotline">
                    <i class="fa-solid fa-headset"></i>
                    <div class="text">
                        <h5>Hotline free 24/24:</h5>
                        <h6>(+100) 123 123 123</h6>
                    </div>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur
                    adipisicing elit. Voluptas dolores officiis natus omnis mollitia aut. Accusantium fugit ducimus
                    pariatur quisquam ratione quae ad dolorem
                    odio ullam architecto sed, omnis praesentium.</p>
            </div>

            <div class="row">
                <h4>FAQs & Help</h4>
                <div class="links">
                    <a href="#">F.A.Q.'s</a>
                    <a href="#">Ordering Tracking</a>
                    <a href="#">Contacts</a>
                    <a href="#">Events</a>
                    <a href="#">Help Center</a>
                </div>
            </div>

            <div class="row">
                <h4>Shipping & Delivery</h4>
                <div class="links">
                    <a href="#">Delivery Information</a>
                    <a href="#">Discount</a>
                    <a href="#">Payment & Shipping</a>
                    <a href="#">Estimated Delivery Time</a>
                    <a href="#">Shipping Guid</a>
                </div>
            </div>

            <div class="row">
                <h4>Information</h4>
                <div class="links">
                    <a href="#">Populer</a>
                    <a href="#">Our Services</a>
                    <a href="#">Your Account</a>
                    <a href="#">Privacy</a>
                    <a href="#">Terms & Condition</a>
                </div>
            </div>
        </div>

        <div class="bottom_footer">
            <div class="container">
                <p>Copyright &copy;<span>Topico.</span> all Rights Reserved</p>
                <div class="payment_img">
                    <img src="img/payment-1.png" alt="">
                    <img src="img/payment-2.png" alt="">
                    <img src="img/payment-3.png" alt="">
                    <img src="img/payment-4.png" alt="">
                </div>
            </div>
        </div>
    </footer>


    <script src="js/main.js"></script>
    <script src="js/index.js"></script>



    <script>
        function searchResultScreen() {
            // const urlParams = new URLSearchParams(window.location.search);
            const query = localStorage.getItem('searchInput');
            const products_search = document.getElementById('products_search');

            if (query) {
                products_search.innerHTML = ``;
                const filteredProducts = Object.keys(all_products_json)
                    .map(key => all_products_json[key])
                    .filter(product => {
                        return product.name.toLowerCase().includes(query);
                    });



                if (filteredProducts.length > 0) {
                    filteredProducts.forEach(product => {

                        const images = product.images || [];
                        let img1 = images[0] || 'default.jpg'; // Use the first image or a default
                        let img2 = images[1] || img1; // Use the second image or fallback to the first

                        // Ensure the image paths are valid         ///uploads/
                        img1 = img1.startsWith("http") ? img1 : `${img1}`; // Use `/uploads/` for local images
                        img2 = img2.startsWith("http") ? img2 : `${img2}`; // Use `/uploads/` for local images

                        let priceHTML = `
                        <div class="price">
                            <p><span>₪${product.price}</span></p>
                        </div>
                    `;
                        if (product.discount && product.discount < product.price && product.discount != 0) {
                            priceHTML = `
                                <div class="price">
                                    <p class="discounted_price">₪${product.discount}</p>
                                    <p class="old_price"><s>₪${product.price}</s></p>
                                </div>           
                            `;
                        }

                        products_search.innerHTML += `
                    <div class="product">
                        <div class="icons">     
                            <span><i class="fa-solid fa-cart-plus"></i></span>
                            <span><i class="fa-solid fa-heart"></i></span>
                            <span><i class="fa-solid fa-share"></i></span>
                        </div>
    
                        <div class="img_product">
                            <img src="${img1}" alt="">
                            <img class="img_hover" src="${img2}" alt="">
                        </div>
    
                        <h3 class="name_product">
                            <a href="item.html?id=${product.id}">${product.name}</a>
                        </h3>
    
                        <div class="stars">
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                        </div>

                        ${priceHTML}
                    </div>
                    `;
                    })
                } else {
                    products_search.textContent = "nothing found"
                }
            } else {
                products_search.textContent = 'No search input found.';
            }
        }

        // Call the searchResultScreen function only on the search results page
        if (window.location.pathname.includes("search_results.html")) {
            window.addEventListener("load", searchResultScreen);
        }
    </script>


    <script>
        window.onload = function () {
            const storedCart = localStorage.getItem('cartItems');
            if (storedCart) {
                product_cart = JSON.parse(storedCart);
                getCartItems();
            }
        };
    </script>

    <script>
        // Add this script at the end of your HTML or in a separate JS file
        window.addEventListener('load', function () {
            setTimeout(function () {
                const splashScreen = document.getElementById('splash-screen');
                if (splashScreen) {
                    splashScreen.style.display = 'none';
                }
            }, 500); // 1000 milliseconds = 1 second
        });

    </script>


    <style>
        .all_products .products_search {
            width: calc(100% - 300px);
            display: flex;
            flex-wrap: wrap;
            gap: 2.5%;
            margin: auto;
        }

        .all_products .products_search .product {
            width: 23%;
            margin-bottom: 30px;
        }
    </style>

</body>

</html>